<template>
  <div class="min-h-screen bg-gray-900 relative">
    <!-- èƒŒæ™¯åŠ¨ç”» -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
      <div
        class="absolute inset-0 bg-[radial-gradient(circle_at_top_right,rgba(79,70,229,0.1)_0%,transparent_50%)]"
      ></div>
      <CommonCyberGrid class="opacity-10" />
      <div class="absolute top-0 left-0 w-full h-full">
        <svg
          class="animate-float"
          width="100%"
          height="100%"
          viewBox="0 0 100 100"
          preserveAspectRatio="none"
        >
          <defs>
            <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop
                offset="0%"
                style="stop-color: rgb(79, 70, 229); stop-opacity: 0.1"
              />
              <stop
                offset="100%"
                style="stop-color: rgb(16, 185, 129); stop-opacity: 0.1"
              />
            </linearGradient>
          </defs>
          <path
            d="M0,50 Q25,30 50,50 T100,50 L100,100 L0,100 Z"
            fill="url(#gradient)"
            class="animate-wave"
          >
            <animate
              attributeName="d"
              dur="5s"
              repeatCount="indefinite"
              values="
                M0,50 Q25,30 50,50 T100,50 L100,100 L0,100 Z;
                M0,50 Q25,70 50,50 T100,50 L100,100 L0,100 Z;
                M0,50 Q25,30 50,50 T100,50 L100,100 L0,100 Z"
            />
          </path>
        </svg>
      </div>
    </div>

    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <nav
      class="sticky top-0 z-50 backdrop-blur-md bg-gray-900/50 border-b border-gray-800"
    >
      <div
        class="container mx-auto px-4 h-16 flex items-center justify-between"
      >
        <div class="flex items-center space-x-4">
          <button
            @click="router.back()"
            class="group flex items-center space-x-2 text-gray-400 hover:text-white transition-colors"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5 transform group-hover:-translate-x-1 transition-transform"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M15 19l-7-7 7-7"
              />
            </svg>
            <span>è¿”å›</span>
          </button>
          <div class="h-6 w-px bg-gray-700"></div>
          <h1 class="text-xl font-bold text-white">é¡¹ç›®è¯¦æƒ…</h1>
        </div>
        <div class="flex items-center space-x-2">
          <span class="flex h-3 w-3">
            <span
              class="animate-ping absolute inline-flex h-3 w-3 rounded-full bg-green-400 opacity-75"
            ></span>
            <span
              class="relative inline-flex rounded-full h-3 w-3 bg-green-500"
            ></span>
          </span>
          <span class="text-green-400 text-sm">ç³»ç»Ÿè¿è¡Œä¸­</span>
        </div>
      </div>
    </nav>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <div class="container mx-auto px-4 py-8">
      <ScrollReveal>
        <!-- åŸºæœ¬ä¿¡æ¯å¡ç‰‡ -->
        <div
          class="bg-gray-800/50 backdrop-blur-md rounded-xl border border-gray-700/50 p-6 mb-8 transform hover:scale-[1.02] transition-all duration-300"
        >
          <div class="flex items-start gap-6">
            <div
              class="w-32 h-32 rounded-xl bg-gradient-to-br from-primary-500/20 to-secondary-500/20 flex items-center justify-center group perspective"
            >
              <div
                class="relative w-20 h-20 transform-gpu group-hover:rotate-y-180 transition-transform duration-1000 preserve-3d"
              >
                <div class="absolute inset-0 backface-hidden">
                  <span class="text-5xl">ğŸ“º</span>
                </div>
                <div class="absolute inset-0 backface-hidden rotate-y-180">
                  <span class="text-5xl">ğŸš€</span>
                </div>
              </div>
            </div>
            <div class="flex-1">
              <div class="flex items-center justify-between mb-4">
                <h2 class="text-3xl font-bold text-white">
                  NikoLive
                  <span
                    class="text-transparent bg-clip-text bg-gradient-to-r from-primary-400 to-secondary-400"
                  >
                    å…¨åœºæ™¯äº’åŠ¨ç›´æ’­å¹³å°
                  </span>
                </h2>
                <span class="text-gray-400">2024.09 - è‡³ä»Š</span>
              </div>
              <div class="flex items-center gap-4 mb-4">
                <span
                  class="px-3 py-1 rounded-full text-xs font-medium bg-green-500/10 text-green-400 border border-green-500/20"
                >
                  åœ¨çº¿è¿è¡Œä¸­
                </span>
                <div class="flex items-center text-gray-400 text-sm">
                  <svg
                    class="w-4 h-4 mr-1"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"
                    />
                  </svg>
                  æ—¥å‡å¹¶å‘ 10ä¸‡+
                </div>
              </div>
              <p class="text-gray-300 leading-relaxed">
                {{ projectDetail.description }}
              </p>
            </div>
          </div>
        </div>
      </ScrollReveal>

      <ScrollReveal>
        <!-- æŠ€æœ¯æ¶æ„ -->
        <div
          class="bg-gray-800/50 backdrop-blur-md rounded-xl border border-gray-700/50 p-6 mb-8"
        >
          <h3 class="text-2xl font-bold text-white mb-6 flex items-center">
            <span
              class="text-transparent bg-clip-text bg-gradient-to-r from-primary-400 to-secondary-400"
            >
              æŠ€æœ¯æ¶æ„
            </span>
            <div
              class="ml-4 flex-1 h-px bg-gradient-to-r from-primary-500/50 to-transparent"
            ></div>
          </h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <ScrollReveal
              v-for="(section, index) in architectureSections"
              :key="index"
              :delay="index * 0.1"
            >
              <div
                class="p-4 rounded-lg bg-gray-700/30 hover:bg-gray-700/50 transition-colors group"
              >
                <h4 class="font-semibold text-white mb-2 flex items-center">
                  <span class="text-xl mr-2">{{ section.icon }}</span>
                  {{ section.title }}
                </h4>
                <p class="text-gray-300">{{ section.content }}</p>
              </div>
            </ScrollReveal>
          </div>
        </div>
      </ScrollReveal>

      <!-- å…¶ä»–éƒ¨åˆ†ä¿æŒä¸å˜ï¼Œä½†æ·»åŠ  ScrollReveal åŒ…è£… -->
      <ScrollReveal>
        <!-- æ ¸å¿ƒè´¡çŒ®ä¸æŠ€æœ¯äº®ç‚¹ -->
        <div
          class="bg-gray-800/50 backdrop-blur-md rounded-xl border border-gray-700/50 p-6 mb-8"
        >
          <h3 class="text-2xl font-bold text-white mb-6 flex items-center">
            <span
              class="text-transparent bg-clip-text bg-gradient-to-r from-primary-400 to-secondary-400"
            >
              æ ¸å¿ƒè´¡çŒ®ä¸æŠ€æœ¯äº®ç‚¹
            </span>
            <div
              class="ml-4 flex-1 h-px bg-gradient-to-r from-primary-500/50 to-transparent"
            ></div>
          </h3>
          <div class="space-y-6">
            <ScrollReveal
              v-for="(highlight, index) in projectDetail.highlights"
              :key="index"
              :delay="index * 0.1"
              class="transform hover:scale-[1.01] transition-transform duration-300"
            >
              <div
                class="border-l-4 border-primary-500 pl-4 py-2 bg-gray-700/30 rounded-r-lg"
              >
                <h4 class="text-lg font-semibold text-white mb-3">
                  {{ highlight.title }}
                </h4>
                <ul class="space-y-2">
                  <li
                    v-for="(point, idx) in highlight.points"
                    :key="idx"
                    class="text-gray-300 flex items-start"
                  >
                    <span class="text-primary-400 mr-2">â€¢</span>
                    {{ point }}
                  </li>
                </ul>
              </div>
            </ScrollReveal>
          </div>
        </div>
      </ScrollReveal>

      <!-- åˆ›æ–°æˆæœå’Œé¡¹ç›®ä»·å€¼éƒ¨åˆ†ä¹Ÿç±»ä¼¼æ·»åŠ åŠ¨ç”»æ•ˆæœ -->
      <!-- ... å…¶ä»–å†…å®¹ä¿æŒä¸å˜ ... -->
    </div>

    <!-- åº•éƒ¨å›ºå®šçš„æ“ä½œæŒ‰é’® -->
    <div
      class="fixed bottom-0 left-0 right-0 backdrop-blur-md bg-gray-900/50 border-t border-gray-800"
    >
      <div
        class="container mx-auto px-4 h-16 flex justify-between items-center"
      >
        <div class="flex items-center space-x-6">
          <div class="flex items-center">
            <span class="flex h-3 w-3 relative mr-2">
              <span
                class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"
              ></span>
              <span
                class="relative inline-flex rounded-full h-3 w-3 bg-green-500"
              ></span>
            </span>
            <span class="text-green-400 text-sm">ç³»ç»Ÿåœ¨çº¿</span>
          </div>
          <div class="text-gray-300 text-sm">
            æ—¥æ´»ç”¨æˆ·ï¼š
            <CountUp :end-val="50" :suffix="'ä¸‡+'" />
          </div>
        </div>
        <div class="flex gap-4">
          <button class="btn-primary">
            <span class="mr-2">ğŸ“Š</span>
            æŸ¥çœ‹æ•°æ®é¢æ¿
          </button>
          <button class="btn-secondary">
            <span class="mr-2">ğŸ”—</span>
            è®¿é—®ç³»ç»Ÿ
          </button>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from "vue";
import { useRouter } from "vue-router";
import ScrollReveal from "~/components/animations/ScrollReveal.vue";
import CommonCyberGrid from "~/components/common/CyberGrid.vue";
import CountUp from "~/components/animations/CountUp.vue";

const router = useRouter();

const architectureSections = [
  {
    icon: "âš›ï¸",
    title: "å‰ç«¯æ¡†æ¶",
    content:
      "Vue3 + TypeScript + PiniaçŠ¶æ€ç®¡ç†ï¼ˆæ¨¡å—åŒ–è®¾è®¡ï¼ŒTSç±»å‹è¦†ç›–ç‡>90%ï¼‰",
  },
  {
    icon: "ğŸ”„",
    title: "é€šä¿¡å±‚",
    content: "è…¾è®¯äº‘TRTCï¼ˆ<300msè¶…ä½å»¶è¿Ÿï¼‰+ IMå³æ—¶é€šä¿¡ï¼ˆä¿¡ä»¤åŒæ­¥ç²¾åº¦<100msï¼‰",
  },
  {
    icon: "ğŸ› ï¸",
    title: "å·¥ç¨‹åŒ–",
    content: "Webpackå¤šç¯å¢ƒæ„å»º + Tailwind CSSåŸå­åŒ–æ ·å¼ï¼ˆé¦–å±åŠ è½½<1.2sï¼‰",
  },
  {
    icon: "ğŸš€",
    title: "ç‰¹è‰²æŠ€æœ¯",
    content: "WebRTC P2Pç©¿é€ã€VAPåŠ¨æ€ç¤¼ç‰©æ¸²æŸ“å¼•æ“ã€æ··æµæœåŠ¡å™¨æ¶æ„",
  },
];

// é¡¹ç›®è¯¦æƒ…æ•°æ®ä¿æŒä¸å˜
const projectDetail = ref({
  description:
    "åŸºäºVue3+TypeScriptæŠ€æœ¯æ ˆæ„å»ºçš„ç»¼åˆæ€§ç›´æ’­è§£å†³æ–¹æ¡ˆï¼Œé›†æˆä½å»¶è¿Ÿç›´æ’­ã€å¤šè§’è‰²äº¤äº’ã€å®æ—¶è¿éº¦PKã€åŠ¨æ€ç¤¼ç‰©ç‰¹æ•ˆç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œæ”¯æŒæ¨ªç«–å±è‡ªé€‚åº”ä¸å¤šç«¯æ— ç¼ä½“éªŒï¼Œæ—¥å‡æ‰¿è½½10ä¸‡+å¹¶å‘ç”¨æˆ·äº’åŠ¨ã€‚",
  highlights: [
    {
      title: "ç›´æ’­å¼•æ“æ¶æ„è®¾è®¡",
      points: [
        "ä¸»å¯¼è®¾è®¡å¤šè§’è‰²ç›´æ’­ç³»ç»Ÿï¼Œå®ç°ä¸»æ’­/è§‚ä¼—è§’è‰²ç§’çº§åˆ‡æ¢ï¼Œé‡‡ç”¨PiniaçŠ¶æ€æœºç®¡ç†200+ç›´æ’­é—´äº‹ä»¶æµï¼Œæ•°æ®åŒæ­¥å»¶è¿Ÿæ§åˆ¶åœ¨150mså†…",
        "æ„å»ºTRTC+WebRTCæ··åˆæ¨æµæ–¹æ¡ˆï¼Œé€šè¿‡æ™ºèƒ½è·¯ç”±ç®—æ³•åŠ¨æ€åˆ‡æ¢ä¼ è¾“åè®®ï¼Œå¼±ç½‘ç¯å¢ƒä¸‹å¡é¡¿ç‡é™ä½42%",
        "å¼€å‘è·¨æˆ¿è¿éº¦PKç³»ç»Ÿï¼Œæ”¯æŒåŒä¸»æ’­/å¤šäººç»„é˜Ÿå®æ—¶æ··æµï¼Œé‡‡ç”¨è…¾è®¯äº‘MCUæ··æµæœåŠ¡ï¼ŒéŸ³ç”»åŒæ­¥è¯¯å·®<80ms",
      ],
    },
    {
      title: "é«˜å¹¶å‘å®æ—¶äº’åŠ¨ç³»ç»Ÿ",
      points: [
        "è®¾è®¡åˆ†çº§æ¶ˆæ¯é€šé“ï¼šæ™®é€šå¼¹å¹•ï¼ˆWSé•¿è¿æ¥ï¼‰ã€ç¤¼ç‰©æ¶ˆæ¯ï¼ˆHTTP2+Binaryåè®®ï¼‰ã€ä¿¡ä»¤æ§åˆ¶ï¼ˆUDP+é‡è¯•æœºåˆ¶ï¼‰",
        "å®ç°VAPåŠ¨æ•ˆç¤¼ç‰©ä½“ç³»ï¼šå¼€å‘åŸºäºWebGLçš„æ¸²æŸ“å¼•æ“ï¼Œæ”¯æŒç²’å­ç‰¹æ•ˆ/3Dæ¨¡å‹ç¤¼ç‰©ï¼Œèµ„æºåŠ è½½æ•ˆç‡æå‡65%",
        "æ„å»ºå®æ—¶æ•°æ®çœ‹æ¿ï¼šé›†æˆEChartså®ç°ç§’çº§æ›´æ–°çš„åœ¨çº¿äººæ•°/æ‰“èµé‡‘é¢/GMVçƒ­åŠ›å›¾ï¼Œæ•°æ®å»¶è¿Ÿ<500ms",
      ],
    },
    {
      title: "æè‡´æ€§èƒ½ä¼˜åŒ–",
      points: [
        "ç›´æ’­æµæ™ºèƒ½é™çº§ï¼šæ ¹æ®è®¾å¤‡æ€§èƒ½åŠ¨æ€åˆ‡æ¢HLS/FLV/WebRTCåè®®ï¼Œé¦–å¸§åŠ è½½æ—¶é—´ä¼˜åŒ–è‡³0.8s",
        "ç»„ä»¶çº§æ‡’åŠ è½½ï¼šç›´æ’­é—´æ¨¡å—æŒ‰éœ€åŠ è½½ï¼ŒWebpackåˆ†åŒ…ç­–ç•¥ä½¿é¦–åŒ…ä½“ç§¯å‡å°‘58%ï¼ˆä»3.2MBâ†’1.35MBï¼‰",
        "æ¸²æŸ“æ€§èƒ½æå‡ï¼šé‡‡ç”¨Tailwind CSS + CSS GPUåŠ é€Ÿï¼Œç›´æ’­é—´FPSç¨³å®šåœ¨60å¸§ï¼Œå†…å­˜å ç”¨é™ä½30%",
      ],
    },
    {
      title: "å®‰å…¨ä¸ç¨³å®šæ€§å»ºè®¾",
      points: [
        "è®¾è®¡åŠ¨æ€é˜²ç›—é“¾ä½“ç³»ï¼šæ¨æµåœ°å€HMAC-SHA256åŠ å¯† + æ—¶é—´æˆ³æ ¡éªŒï¼Œæ‹¦æˆªéæ³•è¯·æ±‚æˆåŠŸç‡100%",
        "å®ç°ç†”æ–­é™çº§æœºåˆ¶ï¼šå½“QPSè¶…è¿‡é˜ˆå€¼æ—¶è‡ªåŠ¨åˆ‡æ¢è‡³å¤‡ç”¨CDNï¼Œç³»ç»Ÿå¯ç”¨æ€§è¾¾99.99%",
        "å»ºç«‹å¤šç»´åº¦ç›‘æ§ï¼šå‰ç«¯Performance API+SentRYå¼‚å¸¸æ•æ‰ï¼Œåç«¯TRTC QoSè´¨é‡å·¡æ£€",
      ],
    },
  ],
  innovations: [
    {
      icon: "ğŸ”„",
      title: "åŒåè®®æ··åˆæ¨æµ",
      description:
        "è¡Œä¸šé¦–ä¸ªã€ŒåŒåè®®æ··åˆæ¨æµã€æ–¹æ¡ˆï¼šTRTCä¿åº•+WebRTCæ™ºèƒ½åˆ‡æ¢ï¼Œå¸¦å®½æˆæœ¬é™ä½37%",
    },
    {
      icon: "ğŸ“±",
      title: "è·¨ç«¯åˆ†è¾¨ç‡è‡ªé€‚åº”",
      description:
        "ã€Œè·¨ç«¯åˆ†è¾¨ç‡è‡ªé€‚åº”ã€ç®—æ³•ï¼šæ ¹æ®è®¾å¤‡DPIåŠ¨æ€è°ƒæ•´æ¨æµå‚æ•°ï¼Œé«˜æ¸…åœºæ™¯ç ç‡èŠ‚çº¦28%",
    },
    {
      icon: "ğŸ",
      title: "è™šæ‹Ÿç¤¼ç‰©çƒ­æ›´æ–°",
      description:
        "ã€Œè™šæ‹Ÿç¤¼ç‰©çƒ­æ›´æ–°ã€ç³»ç»Ÿï¼šæ— éœ€å‘ç‰ˆå³å¯é€šè¿‡CDNåŠ¨æ€åŠ è½½æ–°ç¤¼ç‰©ï¼ŒåŠŸèƒ½ä¸Šçº¿å‘¨æœŸç¼©çŸ­70%",
    },
  ],
  values: [
    {
      title: "æŠ€æœ¯ä»·å€¼",
      content:
        "æ²‰æ·€ç›´æ’­é¢†åŸŸ3å¤§æ ¸å¿ƒä¸“åˆ©ï¼ˆè·¨æˆ¿æ··æµæ–¹æ³•ã€åŠ¨æ•ˆæ¸²æŸ“å¼•æ“ã€å¤šåè®®é€‚é…æ¶æ„ï¼‰",
    },
    {
      title: "ä¸šåŠ¡ä»·å€¼",
      content: "æ”¯æ’‘å¹³å°ä¸Šçº¿é¦–æœˆDAUçªç ´50ä¸‡ï¼Œä¸»æ’­åˆ†æˆä½“ç³»å¸¦æ¥æœˆå‡300ä¸‡æµæ°´",
    },
    {
      title: "æ‰©å±•æ€§",
      content: "æ¶æ„è®¾è®¡æ”¯æŒå¿«é€Ÿæ‰©å±•çŸ­è§†é¢‘/è¯­èŠæˆ¿ç­‰åœºæ™¯ï¼ŒåŠŸèƒ½æ¨¡å—å¤ç”¨ç‡è¾¾85%",
    },
  ],
});
</script>

<style scoped>
.perspective {
  perspective: 1000px;
}

.preserve-3d {
  transform-style: preserve-3d;
}

.backface-hidden {
  backface-visibility: hidden;
}

.rotate-y-180 {
  transform: rotateY(180deg);
}

.btn-primary {
  @apply px-6 py-2 rounded-full bg-primary-500 text-white hover:bg-primary-600 
    transition-all duration-300 transform hover:scale-105 hover:shadow-lg 
    hover:shadow-primary-500/25 flex items-center;
}

.btn-secondary {
  @apply px-6 py-2 rounded-full bg-gray-700 text-white hover:bg-gray-600 
    transition-all duration-300 transform hover:scale-105 hover:shadow-lg 
    hover:shadow-gray-500/25 flex items-center;
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

@keyframes float {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-20px);
  }
}

.animate-wave {
  animation: wave 5s ease-in-out infinite;
}

@keyframes wave {
  0%,
  100% {
    d: path("M0,50 Q25,30 50,50 T100,50 L100,100 L0,100 Z");
  }
  50% {
    d: path("M0,50 Q25,70 50,50 T100,50 L100,100 L0,100 Z");
  }
}
</style>
