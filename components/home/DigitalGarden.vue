<template>
  <section
    class="py-24 relative overflow-hidden bg-gradient-to-b from-gray-900 via-gray-900 to-gray-800"
  >
    <!-- èƒŒæ™¯åŠ¨ç”» -->
    <CommonCyberGrid class="opacity-3" />
    <CircuitLines class="opacity-20" />

    <!-- è£…é¥°æ€§åœ†ç¯ -->
    <div
      class="absolute top-20 left-10 w-64 h-64 bg-primary-500/3 rounded-full blur-3xl animate-pulse"
    ></div>
    <div
      class="absolute bottom-20 right-10 w-64 h-64 bg-secondary-500/3 rounded-full blur-3xl animate-pulse delay-1000"
    ></div>

    <!-- æµ®åŠ¨è£…é¥°å…ƒç´  -->
    <div class="absolute top-40 right-20 animate-float-slow">
      <div
        class="w-20 h-20 border border-primary-500/20 rounded-lg rotate-45"
      ></div>
    </div>
    <div class="absolute bottom-40 left-20 animate-float-slow delay-500">
      <div class="w-16 h-16 border border-secondary-500/20 rounded-full"></div>
    </div>

    <!-- èƒŒæ™¯æ¸å˜ -->
    <div
      class="absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(79,70,229,0.05)_0%,transparent_50%)]"
    ></div>
    <div
      class="absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(16,185,129,0.05)_0%,transparent_50%)]"
    ></div>

    <div class="container mx-auto px-4 relative">
      <!-- æ ‡é¢˜éƒ¨åˆ† -->
      <ScrollReveal direction="bottom" :distance="50">
        <div class="relative">
          <h2
            class="text-4xl md:text-5xl font-bold text-center mb-8 relative z-10"
          >
            <span
              class="text-primary-400 inline-block transform hover:scale-110 transition-transform"
              >ğŸŒ±</span
            >
            <span
              class="text-transparent bg-clip-text bg-gradient-to-r from-primary-400 via-secondary-400 to-primary-400 animate-gradient-x"
            >
              æ¬¢è¿æ¥åˆ°æˆ‘çš„æ•°å­—èŠ±å›­
            </span>
          </h2>
          <!-- æ ‡é¢˜è£…é¥°çº¿ -->
          <div
            class="absolute -bottom-4 left-1/2 transform -translate-x-1/2 w-40 h-0.5 bg-gradient-to-r from-transparent via-primary-500/50 to-transparent"
          ></div>
        </div>

        <p
          class="text-gray-400 text-lg text-center max-w-3xl mx-auto mb-16 leading-relaxed"
        >
          è¿™é‡Œæ˜¯æˆ‘è®°å½•æŠ€æœ¯æˆé•¿ã€åˆ†äº«å‰ç«¯è§è§£çš„è§’è½ã€‚çƒ­çˆ±å°†è®¾è®¡è½¬åŒ–ä¸ºä¼˜é›…ä»£ç ï¼Œäº«å—åœ¨åƒç´ ä¸é€»è¾‘ä¹‹é—´å¯»æ‰¾å®Œç¾å¹³è¡¡çš„ä¹è¶£ã€‚
        </p>
      </ScrollReveal>

      <!-- ä¸»è¦å†…å®¹å¡ç‰‡ -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16">
        <!-- å…³äºæˆ‘ -->
        <ScrollReveal direction="left" :distance="100" :delay="0.2">
          <div class="card-container group relative" data-scroll>
            <div class="card-glow"></div>
            <div
              class="bg-gray-900 rounded-xl p-6 border-2 border-gray-700 hover:border-primary-500 transition-all relative z-10"
            >
              <div class="card-header">
                <span
                  class="text-3xl mr-2 transform group-hover:scale-110 transition-transform"
                  >ğŸ‘¨â€ğŸ’»</span
                >
                <h3 class="text-2xl font-semibold text-white">å…³äºæˆ‘</h3>
              </div>
              <p class="text-gray-400 mb-4 mt-4">
                ä¸€åå¯¹ç”¨æˆ·ä½“éªŒæœ‰æ‰§å¿µçš„å‰ç«¯å¼€å‘è€…ï¼Œæ“…é•¿ç”¨ React/Vue
                æ­å»ºå¯Œæœ‰ç”Ÿå‘½åŠ›çš„ Web åº”ç”¨ã€‚æ—¥å¸¸æ²‰è¿·äºï¼š
              </p>
              <ul class="space-y-3 text-gray-300">
                <li
                  class="skill-item group/item"
                  v-for="(skill, index) in skills"
                  :key="skill"
                  :style="{ '--delay': `${index * 0.1}s` }"
                >
                  <span class="skill-dot"></span>
                  <span class="skill-text">{{ skill }}</span>
                </li>
              </ul>
            </div>
          </div>
        </ScrollReveal>

        <!-- æŠ€æœ¯æ‰‹è®° -->
        <ScrollReveal direction="bottom" :distance="100" :delay="0.2">
          <div class="card-container group" data-scroll>
            <div class="card-glow"></div>
            <div
              class="bg-gray-800/30 backdrop-blur-sm rounded-xl p-6 border border-gray-700/50 hover:border-secondary-500/50 transition-all relative z-10"
            >
              <div class="card-header">
                <span
                  class="text-3xl mr-2 transform group-hover:scale-110 transition-transform"
                  >âœ¨</span
                >
                <h3 class="text-2xl font-semibold text-white">æŠ€æœ¯æ‰‹è®°</h3>
              </div>
              <p class="text-gray-400 mb-4 mt-4">åœ¨è¿™é‡Œä½ ä¼šçœ‹åˆ°ï¼š</p>
              <ul class="space-y-3 text-gray-300">
                <li
                  class="note-item group/item"
                  v-for="(note, index) in notes"
                  :key="note"
                  :style="{ '--delay': `${index * 0.1}s` }"
                >
                  <span
                    class="text-secondary-400 mr-2 transform group-hover/item:translate-x-1 transition-transform"
                    >â–·</span
                  >
                  <span class="note-text">{{ note }}</span>
                </li>
              </ul>
            </div>
          </div>
        </ScrollReveal>

        <!-- è¿‘æœŸå…³æ³¨ -->
        <ScrollReveal direction="right" :distance="100" :delay="0.2">
          <div class="card-container group" data-scroll>
            <div class="card-glow"></div>
            <div
              class="bg-gray-800/30 backdrop-blur-sm rounded-xl p-6 border border-gray-700/50 hover:border-primary-500/50 transition-all relative z-10"
            >
              <div class="card-header">
                <span
                  class="text-3xl mr-2 transform group-hover:scale-110 transition-transform"
                  >ğŸš€</span
                >
                <h3 class="text-2xl font-semibold text-white">è¿‘æœŸå…³æ³¨</h3>
              </div>
              <ul class="space-y-4 text-gray-300 mt-4">
                <li
                  class="focus-item group/item"
                  v-for="(focus, index) in focuses"
                  :key="focus"
                  :style="{ '--delay': `${index * 0.1}s` }"
                >
                  <div class="focus-dot"></div>
                  <span class="focus-text">{{ focus }}</span>
                </li>
              </ul>
            </div>
          </div>
        </ScrollReveal>
      </div>

      <!-- ä¸æˆ‘è¿æ¥ -->
      <ScrollReveal direction="bottom" :distance="50" :delay="0.8">
        <div class="max-w-2xl mx-auto text-center">
          <div class="connect-header mb-8">
            <span
              class="text-3xl transform hover:scale-110 transition-transform inline-block"
              >ğŸ“®</span
            >
            <h3 class="text-2xl font-semibold text-white ml-2 inline-block">
              ä¸æˆ‘è¿æ¥
            </h3>
          </div>

          <p class="text-gray-400 mb-8">å½“æˆ‘ä¸åœ¨æ•²ä»£ç æ—¶ï¼Œå¯èƒ½åœ¨ï¼š</p>

          <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-12">
            <div class="hobby-card" v-for="hobby in hobbies" :key="hobby.text">
              <span class="hobby-icon">{{ hobby.icon }}</span>
              <span class="hobby-text">{{ hobby.text }}</span>
            </div>
          </div>

          <div class="flex flex-wrap justify-center gap-4">
            <a
              v-for="action in actions"
              :key="action.text"
              :href="action.link"
              :class="['action-button', action.type]"
            >
              <span class="button-icon">{{ action.icon }}</span>
              <span class="button-text">{{ action.text }}</span>
            </a>
          </div>
        </div>
      </ScrollReveal>
    </div>
  </section>
</template>

<script setup lang="ts">
import ScrollReveal from "~/components/animations/ScrollReveal.vue";
import CircuitLines from "~/components/animations/CircuitLines.vue";

const skills = [
  "ç»„ä»¶åŒ–è®¾è®¡çš„å“²å­¦æ€è€ƒ",
  "CSS é­”æ³•ä¸åŠ¨ç”»å¾®äº¤äº’",
  "æ€§èƒ½ä¼˜åŒ–çš„æ¯«ç±³çº§é›•ç¢",
  "TypeScript çš„ç±»å‹ä½“æ“è®­ç»ƒ",
];

const notes = [
  "å‰æ²¿æŠ€æœ¯æ·±åº¦å®è·µ",
  "åç›´è§‰çš„æµè§ˆå™¨è¿è¡Œæœºåˆ¶å›¾è§£",
  "ä¼˜é›…ä»£ç çš„ç‚¼æˆæ–¹æ³•è®º",
  "å¼€æºé¡¹ç›®è¸©å‘å®å½•",
];

const focuses = [
  "æ¢ç´¢ Three.js çš„ 3D å¯è§†åŒ–å¯èƒ½æ€§",
  "ç”¨ Rust é‡å†™å‰ç«¯å·¥å…·é“¾çš„å®è·µ",
  "Web Components çš„ç”Ÿæ€çªå›´æˆ˜",
  "å¦‚ä½•è®¾è®¡è‡ªè§£é‡Šçš„ API æ¥å£",
];

const hobbies = [
  { icon: "ğŸ¨", text: "æ‹†è§£äº¤äº’åŠ¨ç”»" },
  { icon: "ğŸ”§", text: "æäº¤å¼€æºPR" },
  { icon: "âœï¸", text: "ç´ æç•Œé¢å¸ƒå±€" },
  { icon: "ğŸ¹", text: "æ”¶é›†é”®ç›˜å£°å“" },
];

const actions = [
  { icon: "ğŸ“š", text: "æŸ¥çœ‹æœ€æ–°æ–‡ç« ", link: "#", type: "primary" },
  { icon: "ğŸ› ï¸", text: "æ¢ç´¢æˆ‘çš„é¡¹ç›®", link: "#", type: "secondary" },
  { icon: "ğŸ“", text: "æŠ€æœ¯ç®€å†é€šé“", link: "#", type: "primary" },
];

// ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œæ·»åŠ è§†å·®æ•ˆæœ
onMounted(() => {
  const cards = document.querySelectorAll("[data-scroll]");

  const handleScroll = () => {
    cards.forEach((card) => {
      if (card instanceof HTMLElement) {
        const rect = card.getBoundingClientRect();
        const isVisible = rect.top < window.innerHeight && rect.bottom > 0;

        if (isVisible) {
          const scrolled = window.scrollY;
          const rate = scrolled * 0.05;
          card.style.transform = `translateY(${rate}px)`;
        }
      }
    });
  };

  window.addEventListener("scroll", handleScroll);
  handleScroll(); // åˆå§‹åŒ–ä½ç½®
});
</script>

<style scoped>
.backdrop-blur-sm {
  backdrop-filter: blur(8px);
}

/* å¡ç‰‡å®¹å™¨å’Œå‘å…‰æ•ˆæœ */
.card-container {
  position: relative;
  transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  border-radius: 0.75rem;
  background: #111827; /* æ·±è‰²å®ä½“èƒŒæ™¯ */
  box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.1),
    0 4px 6px -1px rgba(0, 0, 0, 0.5), 0 2px 4px -1px rgba(0, 0, 0, 0.3);
}

.card-container:hover {
  transform: translateY(-5px);
  box-shadow: 0 0 0 2px rgba(var(--primary-rgb), 0.3),
    0 10px 15px -3px rgba(0, 0, 0, 0.5), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
}

.backdrop-blur-xl {
  backdrop-filter: blur(16px);
}

/* å¢å¼ºå¡ç‰‡å†…å®¹çš„å¯¹æ¯”åº¦ */
.text-gray-400 {
  color: rgba(209, 213, 219, 1); /* æ›´äº®çš„æ–‡å­—é¢œè‰² */
}

.text-gray-300 {
  color: rgba(229, 231, 235, 1); /* æ›´äº®çš„æ–‡å­—é¢œè‰² */
}

.card-glow {
  position: absolute;
  inset: -1px;
  background: radial-gradient(
    circle at var(--mouse-x, 50%) var(--mouse-y, 50%),
    rgba(var(--primary-rgb), 0.15),
    /* å¢åŠ å‘å…‰å¼ºåº¦ */ transparent 100%
  );
  opacity: 0;
  transition: opacity 0.3s ease;
  border-radius: 0.75rem;
  z-index: 0;
}

.card-container:hover .card-glow {
  opacity: 1;
}

/* å¡ç‰‡å¤´éƒ¨æ ·å¼ */
.card-header {
  display: flex;
  align-items: center;
  padding-bottom: 1rem;
  border-bottom: 2px solid rgba(255, 255, 255, 0.1); /* æ›´æ˜æ˜¾çš„åˆ†éš”çº¿ */
}

/* æŠ€èƒ½é¡¹æ ·å¼ */
.skill-item {
  display: flex;
  align-items: center;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  animation: slideIn 0.5s ease-out backwards;
  animation-delay: var(--delay);
}

.skill-dot {
  width: 8px;
  height: 8px;
  background: rgba(var(--primary-rgb), 0.5);
  border-radius: 50%;
  margin-right: 12px;
  transition: all 0.3s ease;
}

.skill-item:hover .skill-dot {
  background: rgb(var(--primary-rgb));
  box-shadow: 0 0 8px rgba(var(--primary-rgb), 0.5);
}

/* ç¬”è®°é¡¹æ ·å¼ */
.note-item {
  display: flex;
  align-items: center;
  transition: all 0.3s ease;
  animation: slideIn 0.5s ease-out backwards;
  animation-delay: var(--delay);
}

.note-item:hover {
  color: rgb(var(--secondary-rgb));
  transform: translateX(10px);
}

/* å…³æ³¨é¡¹æ ·å¼ */
.focus-item {
  display: flex;
  align-items: start;
  gap: 12px;
  transition: all 0.3s ease;
  animation: slideIn 0.5s ease-out backwards;
  animation-delay: var(--delay);
}

.focus-dot {
  width: 8px;
  height: 8px;
  background: rgba(var(--primary-rgb), 0.5);
  border-radius: 50%;
  margin-top: 8px;
  transition: all 0.3s ease;
}

.focus-item:hover .focus-dot {
  background: rgb(var(--primary-rgb));
  box-shadow: 0 0 8px rgba(var(--primary-rgb), 0.5);
}

/* çˆ±å¥½å¡ç‰‡æ ·å¼ */
.hobby-card {
  @apply px-4 py-3 bg-gray-800/30 rounded-lg text-gray-300 hover:bg-gray-800/50 transition-all flex flex-col items-center gap-2;
  animation: fadeIn 0.5s ease-out backwards;
  animation-delay: calc(var(--delay) + 0.2s);
}

.hobby-card:hover {
  transform: translateY(-5px);
  background: rgba(var(--primary-rgb), 0.1);
}

/* åŠ¨ä½œæŒ‰é’®æ ·å¼ */
.action-button {
  @apply px-6 py-3 rounded-lg transition-all flex items-center gap-2;
  position: relative;
  overflow: hidden;
}

.action-button::before {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.1),
    transparent
  );
  transform: translateX(-100%);
  transition: transform 0.5s;
}

.action-button:hover::before {
  transform: translateX(100%);
}

.action-button.primary {
  @apply bg-primary-500/10 text-primary-400 hover:bg-primary-500/20;
}

.action-button.secondary {
  @apply bg-secondary-500/10 text-secondary-400 hover:bg-secondary-500/20;
}

/* åŠ¨ç”» */
@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateX(-20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes float-slow {
  0%,
  100% {
    transform: translateY(0) rotate(0deg);
  }
  50% {
    transform: translateY(-20px) rotate(5deg);
  }
}

.animate-float-slow {
  animation: float-slow 6s ease-in-out infinite;
}

.animate-gradient-x {
  background-size: 200% 100%;
  animation: gradient-x 15s ease infinite;
}

@keyframes gradient-x {
  0%,
  100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

:root {
  --primary-rgb: 79, 70, 229;
  --secondary-rgb: 16, 185, 129;
}

/* è°ƒæ•´èƒŒæ™¯æ¸å˜çš„ä¸é€æ˜åº¦ */
.bg-gradient-to-b {
  background: linear-gradient(to bottom, #111827 0%, #1f2937 100%);
}

/* å‡å¼±èƒŒæ™¯åŠ¨ç”»çš„å¹²æ‰° */
.opacity-5 {
  opacity: 0.03;
}

.opacity-30 {
  opacity: 0.1;
}
</style>
